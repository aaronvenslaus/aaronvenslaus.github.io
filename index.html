<html>
    <script src='https://d3js.org/d3.v5.min.js'></script>

<body onload='init()'>

    <svg width=300 height=300></svg>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

<script>
        async function init() {
        var data = await d3.csv("https://flunky.github.io/cars2017.csv");

        console.log(data);

        var electricVehicles;

        for( let idx = 0; idx < data.length; idx++)
        {
            let obj = data[idx];

            if(obj.Fuel == "Electricity")
            {
                electricVehicles.push(obj);
            }
        }

        console.log(electricVehicles);

        
        
        const yScale = d3.scaleLinear()
           .domain([125, 0])
           .range([0, 100]);
        
        var chart = d3.select("svg")
                  .append("g")
                    .attr("transform", "translate("+50+","+50+")");

        chart.append('g').call(d3.axisLeft(yScale));

        const xScale = d3.scaleBand()
            .range([0, 100])
            .domain(electricVehicles.map((electricVehicles) => electricVehicles.Make))
            .padding(0.2);

        chart.append('g')
            .attr('transform', `translate(0, 125)`)
            .call(d3.axisBottom(xScale));

        chart.selectAll()
            .data(electricVehicles)
            .enter()
            .append('rect')
            .attr('x', function(d) { return xScale(d.Make); })
            .attr('y', function(d) { return yScale(d.AverageHighwayMPG); })
            .attr('height', function(d) { return 125 - yScale(d.AverageHighwayMPG); })
            .attr('width', xScale.bandwidth())
        
        // g.selectAll("svg")
        //  .data(electricVehicles)
        //  .enter()
        //  .append("circle")
        //  .attr("cx", function(d, i) { return xScale(parseInt(d.AverageCityMPG, 10)); })
        //  .attr("cy", function(d, i) { return yScale(parseInt(d.AverageHighwayMPG, 10))  })
        //  .attr("r", function(d, i) { return 2 + parseInt(d.EngineCylinders, 10); }) 
        
        }
        
</script>

</body>
</html>