<html>
    <script src='https://d3js.org/d3.v5.min.js'></script>

<body onload='init()'>

    <svg width=300 height=300></svg>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

<script>
        async function init() {
        var data = await d3.csv("https://flunky.github.io/cars2017.csv");

        console.log(data);

        var electricVehicles;

        for( let idx = 0; idx < data.length; idx++)
        {
            let obj = data[idx];

            if(obj.Fuel == "Electricity")
            {
                electricVehicles.push(obj);
            }
        }
        
        xScale = d3.scaleLog()
           .domain([10, 150])
           .range([0, 200])
           .base(10);
        yScale = d3.scaleLog()
           .domain([10, 150])
           .range([200, 0])
           .base(10);
        
        var g = d3.select("svg")
                  .append("g")
                    .attr("transform", "translate("+50+","+50+")")
        
        g.selectAll("svg")
         .data(electricVehicles)
         .enter()
         .append("circle")
         .attr("cx", function(d, i) { return xScale(parseInt(d.AverageCityMPG, 10)); })
         .attr("cy", function(d, i) { return yScale(parseInt(d.AverageHighwayMPG, 10))  })
         .attr("r", function(d, i) { return 2 + parseInt(d.EngineCylinders, 10); }) 
        
        }
        
</script>

</body>
</html>